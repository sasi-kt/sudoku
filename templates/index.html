<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
               -webkit-appearance: none;
                margin: 0;
        }
 
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
    <meta charset="UTF-8">
    <title>Sudoku</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Sudoku</h1>
    <div class="sudoku-board">
        {% for row in board %}
        <div class="sudoku-row">
            {% for cell in row %}
                {% if cell != None %}
                <input type="number" class="sudoku-readonly" value="{{ cell }}" max = 9 min = 1  readonly>
                {% else %}
                <input type="number" class="sudoku-cell" value="{{ cell }}" max = 9 min = 1  >
                {% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    <button id="solve-btn">Solve</button>

    <script>
        document.getElementById('solve-btn').addEventListener('click', () => {
            const board = [];
            document.querySelectorAll('.sudoku-cell').forEach(cell => {
                board.push(parseInt(cell.value) || 0);
            });

            fetch('/solve', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ board: board }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.solved_board) {
                    const cells = document.querySelectorAll('.sudoku-cell');
                    data.solved_board.forEach((value, index) => {
                        cells[index].value = value;
                    });
                } else {
                    alert('Unable to solve the Sudoku puzzle.');
                }
            });
        });
    </script>
</body>
</html>