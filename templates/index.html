<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
               -webkit-appearance: none;
                margin: 0;
        }
 
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
    <meta charset="UTF-8">
    <title>Sudoku</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Sudoku</h1>
    <div class="sudoku-board">
        {% for row in board %}
        <div class="sudoku-row">
            {% for cell in row %}
                {% if cell != 0 %}
                <input type="number" class="sudoku-readonly" value="{{ cell }}" max = 9 min = 1  readonly>
                {% else %}
                <input type="number" class="sudoku-cell" value="{{ None }}" max = 9 min = 1  >
                {% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    </div>
    <button id="check-btn">Check</button>

    <script>
        document.getElementById('check-btn').addEventListener('click', () => {
            const board = [];
            document.querySelectorAll('.sudoku-cell').forEach(cell => {
                board.push(parseInt(cell.value) || 0);
            });
    
            fetch('/check', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ board: board }),
            })
            .then(response => response.json())
            .then(data => {
                const cells = document.querySelectorAll('.sudoku-cell');
                cells.forEach(cell => cell.classList.remove('error'));
    
                if (data.errors) {
                    data.errors.forEach(([row, col]) => {
                        const index = row * 9 + col;
                        cells[index].classList.add('error');
                    });
                }
            });
        });
    </script>

</body>
</html>